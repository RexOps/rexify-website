<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html prefix="og: http://ogp.me/ns#" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta content="text/html; charset=utf-8" http-equiv="content-type">

      <title>Working with packages</title>

      <meta content="Working with packages" property="og:title">
      <meta content="website" property="og:type">
      <meta content="https://www.rexify.org/docs/guides/working_with_packages.html" property="og:url">
      <meta content="https://www.rexify.org/public/images/skin/rexify.org/open_graph.png" property="og:image">

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css" media="screen" rel="stylesheet" type="text/css">
      <meta content="" name="description">
      <meta content="" name="keywords">

   </head>
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>the friendly automation framework</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2020-09-05</b><br>
                     <a href="/blog/2020/09/05/rex-1.12.2.html">Rex-1.12.2</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.12.2.html">Rex-1.12.2 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.12.2">available on CPAN</a>. It fixes various regressions, as well as bugs around file management. Upgrade is highly recommended for all users.</p>

                   <p><b>2020-08-05</b><br>
                     <a href="/blog/2020/08/05/rex-1.12.1.html">Rex-1.12.1</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.12.1.html">Rex-1.12.1 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.12.1">available on CPAN</a>. It adds documentation for feature flags, and fixes a release packaging issue.</p>

                   <p><b>2020-07-05</b><br>
                     <a href="/blog/2020/07/05/rex-1.12.0.html">Rex-1.12.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.12.0.html">Rex-1.12.0 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.12.0">available on CPAN</a>. It adds support for local rsync operations, improves tab completion for Bash and Zsh, and fixes related bugs. It also discontinues support for running Rex on Windows 7, Windows Server 2008 R2, and older versions since both mainstream and extended support has already ended for these products.</p>

                   <p><b>2020-06-09</b><br>
                     <a href="/blog/2020/06/09/rex-on-stackshare.html">Rex on StackShare</a></p><p>
                   </p><p></p><p>Thanks to the support from their amazing team, <a href="https://stackshare.io/rex">Rex is now listed on StackShare</a>.</p>

                   <p><b>2020-06-05</b><br>
                     <a href="/blog/2020/06/05/rex-1.11.0.html">Rex-1.11.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.11.0.html">Rex-1.11.0 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.11.0">available on CPAN</a>. It enhances the behaviour of sysctl and file management, fixes bugs about group management and OpenSSH connection options, and clarifies quite a bit of documentation.</p>


               <h2>Conferences</h2>
                 <div class="news_widget">
                    <div class="news_date">2016-06-21</div>
                    <div class="news_content"><a href="http://preaction.me/">Doug Bell (preaction)</a> from <a href="http://chicago.pm.org/">Chicago.pm</a> will give an <a href="http://www.yapcna.org/yn2016/talk/6549">Introduction to Rex</a> talk at <a href="http://www.yapcna.org/yn2016/">YAPC::NA 2016</a>.</div>
                 </div>

               <h2>Need Help?</h2>
               <p>Rex is a pure open source project, you can find community support in the following places:</p>
               <ul>
                  <li>IRC: <a href="irc://irc.freenode.net/rex">#rex on irc.freenode.net</a></li>
                  <li>Groups: <a href="https://groups.google.com/group/rex-users/">Rex Users</a></li>
                  <li>Serverfault: <a href="http://serverfault.com/questions/tagged/rex">Tag with <i>rex</i></a></li>
                  <li>Issues: <a href="https://github.com/RexOps/Rex/issues">on GitHub</a></li>
                  <li>Feature: you miss a <a href="/care/help__r__ex.html">feature</a>?</li>
               </ul>
               <p><a href="/support/index.html">Professional support</a> is also available.</p>
            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
                




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/guides/index.html">Guides</a>
» <a href="/docs/guides/working_with_packages.html">Working with packages</a>
</p>

              
              <h1>Working with packages</h1>
              <p>If you want to install or remove packages on your server Rex gives you a few functions to do this. Rex tries to guess the right package provider based on the platform Rex connects to.
If you want to use a special package provider (for example, if you&#39;re using SunOS and want to use OpenCSW) you can define the package provider with <code>package_provider_for $os =&gt; $provider_name</code>.</p>

<h2 id="installingapackage">Installing a Package</h2>

<p>To install a package you can use the <code>pkg</code> function.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server1</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    pkg &quot;<span class="hljs-string">apache2</span>&quot;, ensure =&gt; &quot;<span class="hljs-string">present</span>&quot;;
⁠};</code></pre>

<p>If you want to install multiple packages you can do it by providing an array reference.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server1</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    pkg [qw/apache2 vim php5/], ensure =&gt; &quot;<span class="hljs-string">present</span>&quot;;
⁠};</code></pre>

<p>If you want to install a special version of a package you just need to specify the version option.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server1</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    pkg &quot;<span class="hljs-string">apache2</span>&quot;, ensure =&gt; &quot;<span class="hljs-string">2.2.4</span>&quot;;
⁠};</code></pre>

<h2 id="removingapackage">Removing a Package</h2>

<p>If you don&#39;t need a package anymore you can remove it with the remove function.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server1</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    pkg &quot;<span class="hljs-string">apache2</span>&quot;, ensure =&gt; &quot;<span class="hljs-string">absent</span>&quot;;
⁠};</code></pre>

<h2 id="addingapackagerepository">Adding a Package Repository</h2>

<p>Sometimes you have to add custom repositories to your Server. This can be done with the repository function. In the following code block you&#39;ll see an example for Debian and CentOS.</p>

<h3 id="debian">Debian</h3>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server2</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠
⁠    <span class="hljs-comment"># add a repository for debian/ubuntu</span><span class="hljs-comment">
⁠</span>    repository
⁠      add        =&gt; &quot;<span class="hljs-string">myrepo</span>&quot;,
⁠      url        =&gt; &quot;<span class="hljs-string">http://foo.bar/repo</span>&quot;,
⁠      distro     =&gt; &quot;<span class="hljs-string">squeeze</span>&quot;,
⁠      repository =&gt; &quot;<span class="hljs-string">stable</span>&quot;;
⁠};</code></pre>

<h3 id="centos">CentOS</h3>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server2</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠
⁠    <span class="hljs-comment"># add a repository for redhat/centos</span><span class="hljs-comment">
⁠</span>    repository
⁠      add =&gt; &quot;<span class="hljs-string">myrepo</span>&quot;,
⁠      url =&gt; &quot;<span class="hljs-string">http://foo.bar/repo</span>&quot;;
⁠};</code></pre>

<p>After you&#39;ve added a new repository you need to run update_package_db to update the package database so that you can install packages from these repositories.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">server2</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠
⁠    <span class="hljs-comment"># add a repository for redhat/centos</span><span class="hljs-comment">
⁠</span>    repository
⁠      add =&gt; &quot;<span class="hljs-string">myrepo</span>&quot;,
⁠      url =&gt; &quot;<span class="hljs-string">http://foo.bar/repo</span>&quot;;
⁠
⁠    <span class="hljs-comment"># update package database</span><span class="hljs-comment">
⁠</span>    update_package_db;
⁠};</code></pre>

<h2 id="supportedpackageproviders">Supported Package Providers</h2>

<p>Rex supports the following package providers:</p>

<ul>
<li>For ALT Linux: rpm</li>
<li>For Debian Linux: apt</li>
<li>For FreeBSD: pkg</li>
<li>For Gentoo: emerge</li>
<li>For Mageia: urpmi</li>
<li>For NetBSD: pkg</li>
<li>For OpenBSD: pkg</li>
<li>For OpenWrt: opkg</li>
<li>For Redhat/CentOS/ScientificLinux: yum</li>
<li>For SunOS: pkgadd, pkg, OpenCSW, Blastwave</li>
<li>For SuSE: zypper</li>
<li>For Ubuntu: apt</li>
</ul>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <p>Proudly powered by <a href="http://preaction.me/statocles/">Statocles</a></p>
      <a href="https://groups.google.com/group/rex-users/">Google Group</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="http://www.freelists.org/list/rex-users">Mailinglist</a> / <a href="irc://irc.freenode.net/rex">irc.freenode.net #rex</a>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

   </body>

</html>
