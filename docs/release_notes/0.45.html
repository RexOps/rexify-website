<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html prefix="og: http://ogp.me/ns#" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta content="text/html; charset=utf-8" http-equiv="content-type">

      <title>Release notes for 0.45</title>

      <meta content="Release notes for 0.45" property="og:title">
      <meta content="website" property="og:type">
      <meta content="https://www.rexify.org/docs/release_notes/0.45.html" property="og:url">
      <meta content="https://www.rexify.org/public/images/skin/rexify.org/open_graph.png" property="og:image">

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css" media="screen" rel="stylesheet" type="text/css">
      <meta content="" name="description">
      <meta content="" name="keywords">

   </head>
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>the friendly automation framework</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2020-07-05</b><br>
                     <a href="/blog/2020/07/05/rex-1.12.0.html">Rex-1.12.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.12.0.html">Rex-1.12.0 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.12.0">available on CPAN</a>. It adds support for local rsync operations, improves tab completion for Bash and Zsh, and fixes related bugs. It also discontinues support for running Rex on Windows 7, Windows Server 2008 R2, and older versions since both mainstream and extended support has already ended for these products.</p>

                   <p><b>2020-06-09</b><br>
                     <a href="/blog/2020/06/09/rex-on-stackshare.html">Rex on StackShare</a></p><p>
                   </p><p></p><p>Thanks to the support from their amazing team, <a href="https://stackshare.io/rex">Rex is now listed on StackShare</a>.</p>

                   <p><b>2020-06-05</b><br>
                     <a href="/blog/2020/06/05/rex-1.11.0.html">Rex-1.11.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.11.0.html">Rex-1.11.0 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.11.0">available on CPAN</a>. It enhances the behaviour of sysctl and file management, fixes bugs about group management and OpenSSH connection options, and clarifies quite a bit of documentation.</p>

                   <p><b>2020-05-05</b><br>
                     <a href="/blog/2020/05/05/rex-1.10.0.html">Rex-1.10.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.10.0.html">Rex-1.10.0 release</a> is now available on <a href="https://metacpan.org/release/Rex">CPAN</a> (<a href="https://metacpan.org/source/FERKI/Rex-1.10.0/ChangeLog">changelog</a>). Apart from documentation updates and bug fixes, it adds initial package glob support, and an <code>on_change</code> hook for the <code>mkdir</code> command.</p>

                   <p><b>2020-04-05</b><br>
                     <a href="/blog/2020/04/05/rex-1.9.0.html">Rex-1.9.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.9.0.html">Rex-1.9.0 release</a> is now available on <a href="https://metacpan.org/release/Rex">CPAN</a>, and it adds a new feature flag to force writing UTF-8 encoded files, <a href="https://metacpan.org/pod/Rex::Config">documents configuration options</a>, and fixes bugs.</p>


               <h2>Conferences</h2>
                 <div class="news_widget">
                    <div class="news_date">2016-06-21</div>
                    <div class="news_content"><a href="http://preaction.me/">Doug Bell (preaction)</a> from <a href="http://chicago.pm.org/">Chicago.pm</a> will give an <a href="http://www.yapcna.org/yn2016/talk/6549">Introduction to Rex</a> talk at <a href="http://www.yapcna.org/yn2016/">YAPC::NA 2016</a>.</div>
                 </div>

               <h2>Need Help?</h2>
               <p>Rex is a pure open source project, you can find community support in the following places:</p>
               <ul>
                  <li>IRC: <a href="irc://irc.freenode.net/rex">#rex on irc.freenode.net</a></li>
                  <li>Groups: <a href="https://groups.google.com/group/rex-users/">Rex Users</a></li>
                  <li>Serverfault: <a href="http://serverfault.com/questions/tagged/rex">Tag with <i>rex</i></a></li>
                  <li>Issues: <a href="https://github.com/RexOps/Rex/issues">on GitHub</a></li>
                  <li>Feature: you miss a <a href="/care/help__r__ex.html">feature</a>?</li>
               </ul>
               <p><a href="/support/index.html">Professional support</a> is also available.</p>
            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
                




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/release_notes/index.html">Release notes</a>
» <a href="/docs/release_notes/0.45.html">Release notes for 0.45</a>
</p>

              
              <h1>Release notes for 0.45</h1>
              <p>These are the changes in 0.45 release.</p>

<p>We want to thank all the people for contributing code and to fill bug reports. This helps making Rex better and better :)</p>

<h2 id="cloud">Cloud</h2>

<p>Changes in the Cloud API</p>

<ul>
<li><p>OpenStack Support - Ferenc Erki</p>

<ul>
<li><p>Authentication and endpoint.</p>

<pre><code class="hljs">⁠cloud_service &quot;<span class="hljs-string">OpenStack</span>&quot;;
⁠cloud_auth
⁠  tenant_name =&gt; &quot;<span class="hljs-string">tenant</span>&quot;,
⁠  username    =&gt; &quot;<span class="hljs-string">user</span>&quot;,
⁠  password    =&gt; &quot;<span class="hljs-string">password</span>&quot;;
⁠cloud_region &quot;<span class="hljs-string">http://openstack.domain.tld:5000/v2.0</span>&quot;;        </code></pre></li>
<li><p>Creating volumes and vms.</p>

<pre><code class="hljs">⁠<span class="hljs-keyword">my</span> <span class="hljs-type">$vol_id</span> = cloud_volume create =&gt; { size =&gt; <span class="hljs-number">1</span>, zone =&gt; &quot;<span class="hljs-string">nova</span>&quot;, };
⁠
⁠<span class="hljs-keyword">my</span> <span class="hljs-type">$instance</span> = cloud_instance create =&gt; {
⁠    image_id =&gt; &quot;<span class="hljs-string">ccd8bcab-8ad2-4744-8227-08279fab7a42</span>&quot;,
⁠    name     =&gt; &quot;<span class="hljs-string">ostack01</span>&quot;,
⁠    plan_id  =&gt; <span class="hljs-number">2</span>,
⁠    volume   =&gt; <span class="hljs-type">$vol_id</span>,
⁠};        </code></pre></li>
<li><p>Terminating an instance and removing the volume.</p>

<pre><code class="hljs">⁠cloud_instance terminate =&gt; <span class="hljs-type">$instance</span>-&gt;{id};
⁠cloud_volume <span class="hljs-function">delete</span>      =&gt; <span class="hljs-type">$vol_id</span>;        </code></pre></li>
</ul></li>
<li><p>added cloud_image_list() function</p></li>
<li>added cloud_network() function to manage cloud networks if the provider supports it</li>
</ul>

<h2 id="common">Common</h2>

<p>Changes in the core. These include new resources and new options for existing one.</p>

<ul>
<li><p>new options for the file() resource</p>

<ul>
<li><p>no_overwrite option for file() resource.</p>

<p>If this option is set, the file will never be overwritten.</p>

<pre><code class="hljs">⁠file &quot;<span class="hljs-string">/var/named/</span><span class="hljs-type">$zone</span>-&gt;<span class="hljs-string">{name}.zone</span>&quot;,
⁠  content      =&gt; template( &#39;<span class="hljs-string">@zone-file.tpl</span>&#39;, conf =&gt; <span class="hljs-type">$conf</span>, <span class="hljs-type">%</span>{<span class="hljs-type">$zone</span>} ),
⁠  owner        =&gt; &quot;<span class="hljs-string">named</span>&quot;,
⁠  group        =&gt; &quot;<span class="hljs-string">named</span>&quot;,
⁠  no_overwrite =&gt; TRUE;        </code></pre></li>
<li><p>ensure directory option for file().</p>

<p>If the ensure option is set to directory the file() resource will create a directory instead of a file</p>

<pre><code class="hljs">⁠file &quot;<span class="hljs-string">/var/named</span>&quot;,
⁠  ensure =&gt; &quot;<span class="hljs-string">directory</span>&quot;,
⁠  owner  =&gt; &quot;<span class="hljs-string">named</span>&quot;,
⁠  group  =&gt; &quot;<span class="hljs-string">named</span>&quot;;        </code></pre></li>
<li><p>allow array for file() resource.</p>

<p>This allow operations on multiple files without duplicating the code.</p>

<pre><code class="hljs">⁠file [
⁠    &quot;<span class="hljs-string">/etc/rex/io/inventory/bootdevice</span>&quot;, &quot;<span class="hljs-string">/etc/rex/io/inventory/bridge</span>&quot;,
⁠    &quot;<span class="hljs-string">/etc/rex/io/inventory/sysinfo</span>&quot;,    &quot;<span class="hljs-string">/etc/rex/io/inventory/os</span>&quot;
⁠  ],
⁠  owner =&gt; &quot;<span class="hljs-string">root</span>&quot;,
⁠  group =&gt; &quot;<span class="hljs-string">root</span>&quot;,
⁠  mode  =&gt; <span class="hljs-number">755</span>;        </code></pre></li>
</ul></li>
<li><p>New options for run() resource.</p>

<ul>
<li><p>run() resource can now have a name.</p>

<p>This is needed for notifications, if a command should only be executed if notified.</p>

<pre><code class="hljs">⁠run &quot;<span class="hljs-string">kill-process-httpd</span>&quot;,
⁠  command       =&gt; &quot;<span class="hljs-string">killall -KILL httpd</span>&quot;,
⁠  only_notified =&gt; TRUE;
⁠
⁠<span class="hljs-comment"># somewhere else in the code</span><span class="hljs-comment">
⁠</span>notify run =&gt; &quot;<span class="hljs-string">kill-process-httpd</span>&quot;;        </code></pre></li>
<li><p><em>creates</em> option for run() resource.</p>

<p>This tell Rex that this command creates a special file. If this file is found, the command won&#39;t get executed anymore.</p>

<pre><code class="hljs">⁠run &quot;<span class="hljs-string">download-ipxe</span>&quot;,
⁠  command =&gt;
⁠  &quot;<span class="hljs-string">wget -O /var/lib/tftpboot/undionly.ipxe http://boot.ipxe.org/undionly.kpxe</span>&quot;,
⁠  creates =&gt; &quot;<span class="hljs-string">/var/lib/tftpboot/undionly.ipxe</span>&quot;;        </code></pre></li>
<li><p><em>only_if</em> and <em>unless</em> option for run() resource.</p>

<p>This will execute the command only if the command given will execute successfully (or terminate unsuccessfull).</p>

<pre><code class="hljs">⁠run &quot;<span class="hljs-string">add-service-os</span>&quot;,
⁠  command =&gt; &quot;<span class="hljs-string">mysql -uroot &lt; /tmp/data.sql</span>&quot;,
⁠  <span class="hljs-keyword">unless</span> =&gt;
⁠  &quot;<span class="hljs-string">mysql -uroot dbschema -e &#39;SELECT id FROM os_template WHERE id=2&#39; | grep -q 2</span>&quot;;        </code></pre></li>
<li><p>support for customized environments. - #316 - andrejzverev</p>

<p>It is now possible to add custom environment variables to the run() resource.</p>

<pre><code class="hljs">⁠run &quot;<span class="hljs-string">my_command</span>&quot;,
⁠  env =&gt; {
⁠    env_var_1 =&gt; &quot;<span class="hljs-string">the value for 1</span>&quot;,
⁠    env_var_2 =&gt; &quot;<span class="hljs-string">the value for 2</span>&quot;,
⁠  };        </code></pre></li>
</ul></li>
<li><p>Added notifications for <em>run</em> and <em>service</em>.</p>

<ul>
<li><p>services will notified at the end of the task.</p>

<pre><code class="hljs">⁠service &quot;<span class="hljs-string">httpd</span>&quot;, ensure =&gt; &quot;<span class="hljs-string">running</span>&quot;;
⁠
⁠<span class="hljs-comment"># somewhere else in the code</span><span class="hljs-comment">
⁠</span>file &quot;<span class="hljs-string">/etc/httpd/httpd.conf</span>&quot;,
⁠  content   =&gt; template( &quot;<span class="hljs-string">templates/httpd.conf.tpl</span>&quot;, <span class="hljs-type">%vars</span> ),
⁠  on_change =&gt; <span class="hljs-keyword">sub </span>{ notify service =&gt; &quot;<span class="hljs-string">httpd</span>&quot;; };        </code></pre></li>
</ul></li>
<li><p><em>pkg</em> resource (replacement for install function).</p>

<pre><code class="hljs">⁠pkg &quot;<span class="hljs-string">vim</span>&quot;,      ensure =&gt; &quot;<span class="hljs-string">present</span>&quot;;
⁠pkg &quot;<span class="hljs-string">httpd</span>&quot;,    ensure =&gt; &quot;<span class="hljs-string">2.4.6</span>&quot;;
⁠pkg &quot;<span class="hljs-string">vim-tiny</span>&quot;, ensure =&gt; &quot;<span class="hljs-string">absent</span>&quot;;
⁠pkg [ &quot;<span class="hljs-string">tftp-server</span>&quot;, &quot;<span class="hljs-string">wget</span>&quot; ], ensure =&gt; &quot;<span class="hljs-string">latest</span>&quot;;    </code></pre></li>
<li><p>Added account() resource (as replacement for create_user).</p>

<pre><code class="hljs">⁠account &quot;<span class="hljs-string">krimdomu</span>&quot;,
⁠  ensure         =&gt; &quot;<span class="hljs-string">present</span>&quot;,
⁠  uid            =&gt; <span class="hljs-number">509</span>,
⁠  home           =&gt; &#39;<span class="hljs-string">/root</span>&#39;,
⁠  comment        =&gt; &#39;<span class="hljs-string">User Account</span>&#39;,
⁠  expire         =&gt; &#39;<span class="hljs-string">2011-05-30</span>&#39;,
⁠  groups         =&gt; [ &#39;<span class="hljs-string">root</span>&#39;, &#39;<span class="hljs-string">...</span>&#39; ],
⁠  password       =&gt; &#39;<span class="hljs-string">blahblah</span>&#39;,
⁠  <span class="hljs-function">system</span>         =&gt; <span class="hljs-number">1</span>,
⁠  no_create_home =&gt; TRUE,
⁠  ssh_key        =&gt; &quot;<span class="hljs-string">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQChUw...</span>&quot;;    </code></pre></li>
<li><p>Support -g to supply group name - #330 - fanyeren</p></li>
<li><p><em>can_run()</em> now returns the first command found as string - #193</p></li>
<li><p>read cpu information out of /proc/cpuinfo if dmidecode is not available - #306</p></li>
</ul>

<h2 id="bugfixes">Bugfixes</h2>

<p>Known bugs that has been fixed.</p>

<ul>
<li><p>Check if iptables rule already exists.</p></li>
<li><p>Fixed SCM::Git to work with sudo.</p></li>
<li><p>Update _parse_ip subroutine. be possible to parse ppp0. #328 - Tomohiro Hosaka.</p></li>
<li><p>Handles the case where rsync is missing, and that makes Rex wait forever - #331 - Joris DE POOTER.</p></li>
<li><p>Fixed $Rex::Logger::format does not apply. - #335.</p></li>
<li><p>Fixed download() command on windows.</p></li>
<li><p>Fixed debian system_update - #339 - Niklas Larsson.</p></li>
</ul>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <p>Proudly powered by <a href="http://preaction.me/statocles/">Statocles</a></p>
      <a href="https://groups.google.com/group/rex-users/">Google Group</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="http://www.freelists.org/list/rex-users">Mailinglist</a> / <a href="irc://irc.freenode.net/rex">irc.freenode.net #rex</a>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

   </body>

</html>
