<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta content="text/html; charset=utf-8" http-equiv="content-type">

      <title>Release notes for 0.44</title>

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css?20130325" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css?20140412" media="screen" rel="stylesheet" type="text/css">
      <script src="/public/js/skin/rexify.org/highlight.pack.js"></script>
      <meta content="" name="description">
      <meta content="" name="keywords">

   </head>
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>Deployment &amp; Configuration Management</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2019-07-02</b><br>
                     <a href="/blog/2019/07/02/deprecating_official_rex_packages.html">Deprecating official Rex packages</a></p><p>
                   </p><p></p><p>As part of our efforts to simplify maintenance around RexOps projects, we have decided to stop building Rex packages on our side. We recommend relying on OS packages maintained by the various distributions in their respective upstream repositories, or to install Rex from CPAN.</p>

                   <p><b>2019-06-09</b><br>
                     <a href="/blog/2019/06/09/site-update.html">Post-migration updates &amp; clean-up</a></p><p>
                   </p><p></p><p>Over the course of the past weeks many clean-ups have been
done, reaping the benefits provided by our new
<a href="http://preaction.me/statocles">Statocles</a>-based site:</p>

                   <p><b>2019-05-19</b><br>
                     <a href="/blog/2019/05/19/new-site.html">New site engine for rexify.org</a></p><p>
                   </p><p></p><p>After months of work on a new site backend, we reached the MVP today for
our site to be switched over to a new engine: from now on, our site will be
maintained using the static site generator
<a href="http://preaction.me/statocles/">Statocles</a>.</p>


               <h2>Conferences</h2>
                 <div class="news_widget">
                    <div class="news_date">2016-06-21</div>
                    <div class="news_content"><a href="http://preaction.me/">Doug Bell (preaction)</a> from <a href="http://chicago.pm.org/">Chicago.pm</a> will give an <a href="http://www.yapcna.org/yn2016/talk/6549">Introduction to Rex</a> talk at <a href="http://www.yapcna.org/yn2016/">YAPC::NA 2016</a>.</div>
                 </div>

               <h2>Need Help?</h2>
               <p>Rex is a pure open source project, you can find community support in the following places:</p>
               <ul>
                  <li>IRC: <a href="irc://irc.freenode.net/rex">#rex on irc.freenode.net</a></li>
                  <li>Groups: <a href="https://groups.google.com/group/rex-users/">Rex Users</a></li>
                  <li>Serverfault: <a href="http://serverfault.com/questions/tagged/rex">Tag with <i>rex</i></a></li>
                  <li>Issues: <a href="https://github.com/RexOps/Rex/issues">on GitHub</a></li>
                  <li>Feature: you miss a <a href="/feature.html">feature</a>?</li>
               </ul>
               <p><a href="/support/index.html">Professional support</a> is also available.</p>
            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
              




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/release_notes/index.html">Release notes</a>
» <a href="/docs/release_notes/0.44.html">Release notes for 0.44</a>
</p>

              
              <h1>Release notes for 0.44</h1>
              <h1 id="common">Common</h1>

<ul>
<li><p>Docker support (experimental) - #278 - chenryn</p></li>
<li><p>Format the output of say() - #155</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code>sayformat &#39;%h: %s&#39;;

task &quot;test&quot;, sub {
   say &quot;hello world&quot;;
};
</code></pre>

<p>Possible formatting options:</p>

<ul>
<li>%D - current date (yyyy-mm-dd HH:mm:ss)</li>
<li>%h - the target host</li>
<li>%p - the pid</li>
<li><p>%s - the string to output</p></li>
<li><p>user-defined columns for ps() command - #175 - dirkcjelli</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code>task &quot;ps&quot;, &quot;server01&quot;, sub {
   my @list = grep { $_-&gt;{&quot;ni&quot;} == -5 } ps(&quot;command&quot;,&quot;ni&quot;);
};
</code></pre>

<ul>
<li><p>using tilde (~) sign for directories - #198 - Gnouc, Krimdomu</p></li>
<li><p>Rex::SCM::Git now uses cwd option of run() command, so it also works remotely. - #211 - atrodo</p></li>
<li><p>Box default pkg update - #217 - endyman</p></li>
<li><p>run_batch() command to run batches on demand - #222 - jorisd</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code>my @return = run_batch &quot;batchname&quot;, on =&gt; &quot;192.168.3.56&quot;;
</code></pre>

<ul>
<li><p>Allow &quot;sed&quot; function to work on multiple lines. - #227 - davidolrik, krimdomu</p></li>
<li><p>Added bulk_install() method for packages installing - #229 - jorisd</p></li>
<li><p>Enable bulk_install for Gentoo and OpenWrt - #231 - ferki</p></li>
<li><p>Added some hooks at central points in rex, so that it is possible to control the behaviour of rex in some points.</p></li>
</ul>

<p>For example:</p>

<p>Copy to clipboard</p>

<pre><code>use Rex::Hook;
use Data::Dumper;

register_function_hooks {
   before =&gt; {
      file =&gt; sub {
         print Dumper(\@_);
         print &quot;before file\n&quot;;
         return;
      },
      create_user =&gt; sub {
         print &quot;before create_user\n&quot;;
         die;
      },
   },
   after =&gt; {
      file =&gt; sub {
         print &quot;after file\n&quot;;
      },
      create_user =&gt; sub {
         print &quot;after create_user\n&quot;;
      },
   }
};
</code></pre>

<ul>
<li>added on_change hook for sync_up and sync_down - #232</li>
</ul>

<p>Copy to clipboard</p>

<pre><code>sync_up &quot;files/&quot;, &quot;/remote/folder&quot;, {
   on_change =&gt; sub {
      my (@changed_files) = @_;
     # do something
   };
};
</code></pre>

<ul>
<li>Rex::Group::Lookup::Command - read hostnames from a command. - #233 - fanyeren</li>
</ul>

<p>Copy to clipboard</p>

<pre><code>group &quot;dbserver&quot;   =&gt; lookup_command(&quot;cat ip.list | grep -v -E &#39;^#&#39;&quot;);
</code></pre>

<ul>
<li><p>Improve user and group management on OpenWrt - #242 - ferki</p></li>
<li><p>Add kernel module (un)loading support for OpenWrt - #243 - ferki</p></li>
<li><p>Add service status support for OpenWrt - #246 - ferki</p></li>
<li><p>Make ssh read buffer configurable (for Net::SSH2 connections) - #247. This will speedup the connection, but may break on older systems!</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code>set rex_internals =&gt; {
   read_buffer_size =&gt; 2000,
};
</code></pre>

<ul>
<li><p>Add systemd service provider support for Gentoo - #250 - ferki</p></li>
<li><p>Add systemd service provider support for Mageia - #282</p></li>
<li><p>feature flag to deactivate path cleanup - #261</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code># Rexfile
use Rex -feature =&gt; [&#39;no_path_cleanup&#39;];

task prepare =&gt; sub {};
</code></pre>

<ul>
<li>feature flag to parse $HOME/.profile - #262</li>
</ul>

<p>Copy to clipboard</p>

<pre><code># Rexfile
use Rex -feature =&gt; [&#39;source_profile&#39;];

task prepare =&gt; sub {};
</code></pre>

<ul>
<li><p>Cloud::Amazon: check to make sure it is HASH before key look up - #263 - oneness</p></li>
<li><p>autodie feature if run() fail - #265</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code># Rexfile
use Rex -feature =&gt; [&#39;exec_autodie&#39;];

task &quot;prepare&quot;, sub {
   run &quot;this-command-fails&quot;;
};
</code></pre>

<ul>
<li>added support for tcsh shell - #284</li>
</ul>

<h1 id="bugfixes">Bugfixes</h1>

<ul>
<li><p>Fix guestinfo for Gentoo - #236 - ferki</p></li>
<li><p>get_host can&#39;t find aliases - #239, #240 - jorisd, ferki</p></li>
<li><p>rsync get wrong user if using &quot;auth for $task&quot; - #252</p></li>
<li><p>Flag existing feature sudo_without_sh as found - #253 - gittex</p></li>
<li><p>Cleaned up Data module dependency - #254</p></li>
<li><p>iptables arguments needs quote if they are whitespaced - #257 - jorisd</p></li>
<li><p>add pod encoding marker - #259 - sergeyromanov</p></li>
<li><p>&quot;needs&quot; doesn&#39;t know how to call tasks from the main Rexfile - #260</p></li>
<li><p>gathering alias network interfaces like eth0:0 - #264</p></li>
<li><p>Cron: jobs can be duplicated - #269 - jorisd</p></li>
<li><p>FreeBSD: store netmask in dotted decimal format - #287 - andrejzverev</p></li>
<li><p>Uninitialized value in OpenSSH.pm - #290 - samuelet</p></li>
</ul>

<h1 id="communitymodules">Community modules</h1>

<ul>
<li><p>Rex::Ext::Crypt - encrypt strings inside a Rexfile.</p></li>
<li><p>Rex::Ext::Backup - a simple backup module. This module creates a backup of a file before rex changes it.</p></li>
</ul>

<p>Copy to clipboard</p>

<pre><code> include qw/Rex::Ext::Backup/;

 set backup_location =&gt; &quot;backup/%h&quot;;

 task yourtask =&gt; sub {
    file &quot;/etc/foo.conf&quot;, content =&gt; &quot;new content\n&quot;;
 };
</code></pre>

<ul>
<li>Rex::Commands::Pstree - module to run pstree - fanyeren</li>
</ul>

<h1 id="packagerepository">Package repository</h1>

<p>This is the first release build with the new build system on <a href="https://build.rexify.org">build.rexify.org</a>. Due to this fact the following repository URLs have changed:</p>

<ul>
<li>Fedora</li>
<li>Mageia</li>
<li>OpenSuSE</li>
</ul>

<p>Please see the <a href="/get">Get Rex</a> page for the new URLs.</p>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <a href="https://groups.google.com/group/rex-users/">Google Group</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="http://www.freelists.org/list/rex-users">Mailinglist</a> / <a href="irc://irc.freenode.net/rex">irc.freenode.net #rex</a><span id="syntax_high" style="display: none;"> / <a href="#" id="link_syntax_high">Enable Syntax Highlighting</a></span>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

<script>
  hljs.tabReplace = '    ';
  hljs.initHighlightingOnLoad();
</script>


   </body>

</html>
