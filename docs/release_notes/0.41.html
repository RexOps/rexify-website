<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html prefix="og: http://ogp.me/ns#" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta content="text/html; charset=utf-8" http-equiv="content-type">

      <title>Release notes for 0.41</title>

      <meta content="Release notes for 0.41" property="og:title">
      <meta content="website" property="og:type">
      <meta content="https://www.rexify.org/docs/release_notes/0.41.html" property="og:url">
      <meta content="https://www.rexify.org/public/images/skin/rexify.org/open_graph.png" property="og:image">

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css" media="screen" rel="stylesheet" type="text/css">
      <meta content="" name="description">
      <meta content="" name="keywords">

   </head>
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>the friendly automation framework</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2020-02-05</b><br>
                     <a href="/blog/2020/02/05/rex-1.8.1.html">Rex-1.8.1</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.8.1.html">Rex-1.8.1 release</a> is now available on <a href="https://metacpan.org/release/Rex">CPAN</a>, improving release automation, packaging, and documentation.</p>

                   <p><b>2020-01-05</b><br>
                     <a href="/blog/2020/01/05/rex-1.8.0.html">Rex-1.8.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.8.0.html">Rex-1.8.0 release</a> is now available on <a href="https://metacpan.org/release/Rex">CPAN</a>, adding initial support to manage Void Linux systems.</p>

                   <p><b>2019-12-05</b><br>
                     <a href="/blog/2019/12/05/rex-1.7.1.html">Rex-1.7.1</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.7.1.html">Rex-1.7.1 release</a> is now available on <a href="https://metacpan.org/release/Rex">CPAN</a>, fixing a Windows testing issue, and updating some docs.</p>

                   <p><b>2019-11-05</b><br>
                     <a href="/blog/2019/11/05/rex-1.7.0.html">Rex-1.7.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.7.0.html">Rex-1.7.0 release</a> is now available on <a href="https://metacpan.org/release/Rex">CPAN</a>.</p>

                   <p><b>2019-07-02</b><br>
                     <a href="/blog/2019/07/02/deprecating_official_rex_packages.html">Deprecating official Rex packages</a></p><p>
                   </p><p></p><p>As part of our efforts to simplify maintenance around RexOps projects, we have decided to stop building Rex packages on our side. We recommend relying on OS packages maintained by the various distributions in their respective upstream repositories, or to install Rex from CPAN.</p>


               <h2>Conferences</h2>
                 <div class="news_widget">
                    <div class="news_date">2016-06-21</div>
                    <div class="news_content"><a href="http://preaction.me/">Doug Bell (preaction)</a> from <a href="http://chicago.pm.org/">Chicago.pm</a> will give an <a href="http://www.yapcna.org/yn2016/talk/6549">Introduction to Rex</a> talk at <a href="http://www.yapcna.org/yn2016/">YAPC::NA 2016</a>.</div>
                 </div>

               <h2>Need Help?</h2>
               <p>Rex is a pure open source project, you can find community support in the following places:</p>
               <ul>
                  <li>IRC: <a href="irc://irc.freenode.net/rex">#rex on irc.freenode.net</a></li>
                  <li>Groups: <a href="https://groups.google.com/group/rex-users/">Rex Users</a></li>
                  <li>Serverfault: <a href="http://serverfault.com/questions/tagged/rex">Tag with <i>rex</i></a></li>
                  <li>Issues: <a href="https://github.com/RexOps/Rex/issues">on GitHub</a></li>
                  <li>Feature: you miss a <a href="/care/help__r__ex.html">feature</a>?</li>
               </ul>
               <p><a href="/support/index.html">Professional support</a> is also available.</p>
            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
                




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/release_notes/index.html">Release notes</a>
» <a href="/docs/release_notes/0.41.html">Release notes for 0.41</a>
</p>

              
              <h1>Release notes for 0.41</h1>
              <h1 id="common">Common</h1>

<ul>
<li><p>Function to get the last output of a command that uses run() #104</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">mysystem01</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    install &quot;<span class="hljs-string">ntp</span>&quot;;
⁠    say last_command_output;
⁠};    </code></pre></li>
<li><p>Refactored Cron module, added environment variable support to cron</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">mysystem01</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    <span class="hljs-keyword">my</span> <span class="hljs-type">@env</span> = cron env =&gt; user =&gt; list;
⁠    cron env =&gt; user =&gt; add    =&gt; { MYVAR =&gt; &quot;<span class="hljs-string">foo</span>&quot;, };
⁠    cron env =&gt; user =&gt; <span class="hljs-function">delete</span> =&gt; &quot;<span class="hljs-string">MYVAR</span>&quot;;
⁠};    </code></pre></li>
<li><p>New sync module</p></li>
</ul>

<p>This module doesn&#39;t use rsync, so it works with sudo and Windows, too. And it is also possible to use it with templates. If a file should be used as a template, you have to name it somefile.ext.tpl.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">mysystem01</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠
⁠    <span class="hljs-comment"># upload directory recursively to remote system.</span><span class="hljs-comment">
⁠</span>    sync_up &quot;<span class="hljs-string">/local/directory</span>&quot;, &quot;<span class="hljs-string">/remote/directory</span>&quot;;
⁠
⁠    sync_up &quot;<span class="hljs-string">/local/directory</span>&quot;, &quot;<span class="hljs-string">/remote/directory</span>&quot;, {
⁠
⁠        <span class="hljs-comment"># setting custom file permissions for every file</span><span class="hljs-comment">
⁠</span>        files =&gt; {
⁠            owner =&gt; &quot;<span class="hljs-string">foo</span>&quot;,
⁠            group =&gt; &quot;<span class="hljs-string">bar</span>&quot;,
⁠            mode  =&gt; <span class="hljs-number">600</span>,
⁠        },
⁠
⁠        <span class="hljs-comment"># setting custom directory permissions for every directory</span><span class="hljs-comment">
⁠</span>        directories =&gt; {
⁠            owner =&gt; &quot;<span class="hljs-string">foo</span>&quot;,
⁠            group =&gt; &quot;<span class="hljs-string">bar</span>&quot;,
⁠            mode  =&gt; <span class="hljs-number">700</span>,
⁠        },
⁠    };
⁠
⁠    <span class="hljs-comment"># download a directory recursively from the remote system to the local machine</span><span class="hljs-comment">
⁠</span>    sync_down &quot;<span class="hljs-string">/remote/directory</span>&quot;, &quot;<span class="hljs-string">/local/directory</span>&quot;;
⁠};</code></pre>

<ul>
<li>added Hardware::VirtInfo module #119 - Franky Van Liedekerke</li>
</ul>

<p>To get a list of all returned information:</p>

<pre><code class="hljs">⁠<span class="hljs-keyword">use</span> <span class="hljs-function">Data::Dumper</span>;
⁠<span class="hljs-keyword">my</span> <span class="hljs-type">%hw_info</span> = <span class="hljs-function">Rex::Hardware</span>-&gt;get(qw/VirtInfo/);
⁠<span class="hljs-function">print</span> Dumper( \<span class="hljs-type">%hw_info</span> );</code></pre>

<p>To get the hypervisor:</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">info</span>&quot;, &quot;<span class="hljs-string">mysystem01</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    <span class="hljs-keyword">my</span> <span class="hljs-type">%hw_info</span> = <span class="hljs-function">Rex::Hardware</span>-&gt;get(qw/VirtInfo/);
⁠
⁠    say &quot;<span class="hljs-string">Role: </span>&quot; . <span class="hljs-type">$hw_info</span>{VirtInfo}-&gt;{virtualization_role};
⁠    say &quot;<span class="hljs-string">Type: </span>&quot; . <span class="hljs-type">$hw_info</span>{VirtInfo}-&gt;{virtualization_type};
⁠};</code></pre>

<ul>
<li><p>new keyword &quot;case&quot;</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">prepare</span>&quot;, &quot;<span class="hljs-string">myserver01</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠    <span class="hljs-keyword">my</span> <span class="hljs-type">$package</span> = case operating_system, {
⁠        Debian    =&gt; &quot;<span class="hljs-string">vim</span>&quot;,
⁠          CentOS  =&gt; &quot;<span class="hljs-string">vim-enhanced</span>&quot;,
⁠          default =&gt; &quot;<span class="hljs-string">vim</span>&quot;,
⁠    };
⁠
⁠    install <span class="hljs-type">$package</span>;
⁠};    </code></pre></li>
<li><p>Refactored net_ssh2_exec() function - Peter H. Ezetta</p></li>
<li><p>Refactored local command execution to use IPC::Open3</p></li>
<li><p>Changed the is_installed() function for Debian to use the more accurate get_installed function. - Samuele Tognini</p></li>
<li><p>&#39;-t&#39; option should work with &#39;-e&#39; option. <code>rex -t 2 -H &quot;hostA hostB&quot; -e &#39;run &quot;sleep 10&quot;; say run &quot;uptime&quot;&#39;</code> should run in parallel. - Tokuhiro Matsuno</p></li>
<li><p>Fixed loading of modules in $HOME/.rex/recipes</p></li>
<li><p>Don&#39;t calculate MD5 sums if there is no on_change hook for file() function - Franky Van Liedekerke</p></li>
<li><p>More specific error messages for authentication - Franky Van Liedekerke</p></li>
<li><p>Cloud/Amazon: support multiple security groups - RenatoCRON</p>

<pre><code class="hljs">⁠<span class="hljs-type">$instance</span> = cloud_instance create =&gt; {
⁠    image_id        =&gt; &quot;<span class="hljs-string">ami-5187bb25</span>&quot;,
⁠    name            =&gt; &quot;<span class="hljs-string">test01</span>&quot;,
⁠    key             =&gt; &quot;<span class="hljs-string">thekey</span>&quot;,
⁠    zone            =&gt; &quot;<span class="hljs-string">eu-west-1a</span>&quot;,
⁠    type            =&gt; &quot;<span class="hljs-string">m1.large</span>&quot;,
⁠    security_groups =&gt; [ &quot;<span class="hljs-string">alltcpfoo</span>&quot;, &quot;<span class="hljs-string">default</span>&quot; ],
⁠};      </code></pre></li>
</ul>

<h1 id="documentation">Documentation</h1>

<ul>
<li>Fix pod about pubkey authentication - Joris</li>
</ul>

<h1 id="rexgearman">Rex/Gearman</h1>

<ul>
<li>Fixed get_exit_codes use flag</li>
</ul>

<h1 id="rexboxes">Rex/Boxes</h1>

<ul>
<li><p>Creation order of VMs can now be defined in YAML file</p>

<pre><code>type: VBox
#vbox:
#   headless: 1
vms:
   -  name: mem01
      url: http://box.rexify.org/box/ubuntu-server-12.10-amd64.ova
      network:
         1:
            type: bridged
            bridge: &quot;en0: Ethernet&quot;
      setup: setup_memcache
   -  name: db01
      url: http://box.rexify.org/box/ubuntu-server-12.10-amd64.ova
      network:
         1:
            type: bridged
            bridge: &quot;en0: Ethernet&quot;
      setup: setup_db
   -  name: www01
      url: http://box.rexify.org/box/ubuntu-server-12.10-amd64.ova
      network:
         1:
            type: bridged
            bridge: &quot;en0: Ethernet&quot;
      setup: setup_frontend
</code></pre></li>
</ul>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <p>Proudly powered by <a href="http://preaction.me/statocles/">Statocles</a></p>
      <a href="https://groups.google.com/group/rex-users/">Google Group</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="http://www.freelists.org/list/rex-users">Mailinglist</a> / <a href="irc://irc.freenode.net/rex">irc.freenode.net #rex</a>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

   </body>

</html>
