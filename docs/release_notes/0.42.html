<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html content="text/html; charset=utf-8" content-type" prefix="og: http://ogp.me/ns#" xml:lang="en&gt;
   &lt;head&gt;
      &lt;meta http-equiv=" xmlns="http://www.w3.org/1999/xhtml">

      <title>Release notes for 0.42</title>

      <meta content="Release notes for 0.42" property="og:title">
      <meta content="website" property="og:type">
      <meta content="https://www.rexify.org/docs/release_notes/0.42.html" property="og:url">
      <meta content="https://www.rexify.org/public/images/skin/rexify.org/favicon.png" property="og:image">

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css?20130325" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css?20140412" media="screen" rel="stylesheet" type="text/css">
      <meta content="" name="description">
      <meta content="" name="keywords">

   
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>Deployment &amp; Configuration Management</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2019-07-02</b><br>
                     <a href="/blog/2019/07/02/deprecating_official_rex_packages.html">Deprecating official Rex packages</a></p><p>
                   </p><p></p><p>As part of our efforts to simplify maintenance around RexOps projects, we have decided to stop building Rex packages on our side. We recommend relying on OS packages maintained by the various distributions in their respective upstream repositories, or to install Rex from CPAN.</p>

                   <p><b>2019-06-09</b><br>
                     <a href="/blog/2019/06/09/site-update.html">Post-migration updates &amp; clean-up</a></p><p>
                   </p><p></p><p>Over the course of the past weeks many clean-ups have been
done, reaping the benefits provided by our new
<a href="http://preaction.me/statocles">Statocles</a>-based site:</p>

                   <p><b>2019-05-19</b><br>
                     <a href="/blog/2019/05/19/new-site.html">New site engine for rexify.org</a></p><p>
                   </p><p></p><p>After months of work on a new site backend, we reached the MVP today for
our site to be switched over to a new engine: from now on, our site will be
maintained using the static site generator
<a href="http://preaction.me/statocles/">Statocles</a>.</p>


               <h2>Conferences</h2>
                 <div class="news_widget">
                    <div class="news_date">2016-06-21</div>
                    <div class="news_content"><a href="http://preaction.me/">Doug Bell (preaction)</a> from <a href="http://chicago.pm.org/">Chicago.pm</a> will give an <a href="http://www.yapcna.org/yn2016/talk/6549">Introduction to Rex</a> talk at <a href="http://www.yapcna.org/yn2016/">YAPC::NA 2016</a>.</div>
                 </div>

               <h2>Need Help?</h2>
               <p>Rex is a pure open source project, you can find community support in the following places:</p>
               <ul>
                  <li>IRC: <a href="irc://irc.freenode.net/rex">#rex on irc.freenode.net</a></li>
                  <li>Groups: <a href="https://groups.google.com/group/rex-users/">Rex Users</a></li>
                  <li>Serverfault: <a href="http://serverfault.com/questions/tagged/rex">Tag with <i>rex</i></a></li>
                  <li>Issues: <a href="https://github.com/RexOps/Rex/issues">on GitHub</a></li>
                  <li>Feature: you miss a <a href="/feature.html">feature</a>?</li>
               </ul>
               <p><a href="/support/index.html">Professional support</a> is also available.</p>
            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
              




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/release_notes/index.html">Release notes</a>
» <a href="/docs/release_notes/0.42.html">Release notes for 0.42</a>
</p>

              
              <h1>Release notes for 0.42</h1>
              <h1 id="common">Common</h1>

<h4 id="net::opensshconnectionmode-chenryn">Net::OpenSSH connection mode - chenryn</h4>

<p>As of this release it is possible to use Net::OpenSSH for the connection. With this it is also possible to use kerberos authentication and all features OpenSSH has (like ProxyCommand, etc.).</p>

<p>To use Net::OpenSSH you have to set the connection type in your Rexfile.</p>

<p>This fixes long standing pull request #70.</p>

<pre><code class="hljs">⁠<span class="hljs-keyword">use</span> Rex -feature =&gt; &#39;<span class="hljs-string">0.42</span>&#39;;
⁠
⁠set connection =&gt; &#39;<span class="hljs-string">OpenSSH</span>&#39;;
⁠
⁠task &#39;<span class="hljs-string">yourtask</span>&#39;, &#39;<span class="hljs-string">yourserver</span>&#39;, <span class="hljs-keyword">sub </span>{
⁠  say run &#39;<span class="hljs-string">uptime</span>&#39;;
⁠};</code></pre>

<h4 id="kerberosauthentication-chenryn">Kerberos authentication - chenryn</h4>

<p>If you want to use kerberos authentication you have to use Net::OpenSSH.</p>

<pre><code class="hljs">⁠set connection =&gt; &quot;<span class="hljs-string">OpenSSH</span>&quot;;
⁠
⁠user &quot;<span class="hljs-string">youruser</span>&quot;;
⁠krb5_auth;</code></pre>

<h4 id="customuserforsudocommand">Custom user for sudo command</h4>

<p>It is now possible to use custom users for the sudo command.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">mytask</span>&quot;, &quot;<span class="hljs-string">server1</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠  sudo {
⁠    user    =&gt; &quot;<span class="hljs-string">foo</span>&quot;,
⁠    command =&gt; &quot;<span class="hljs-string">id</span>&quot;,
⁠  };
⁠};</code></pre>

<h4 id="newfunctiondelete_lines_according_to-liedekef">new function delete_lines_according_to - liedekef</h4>

<p>This function is similar to delete_lines_matching but with an other syntax and the possibility to use the on_change hook if the file was changed.</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">cleanup</span>&quot;, &quot;<span class="hljs-string">server1</span>&quot;, <span class="hljs-keyword">sub </span>{
⁠  delete_lines_according_to qr{<span class="hljs-string">^</span>foo:}, &quot;<span class="hljs-string">/etc/passwd</span>&quot;, on_change =&gt; <span class="hljs-keyword">sub </span>{
⁠    say &quot;<span class="hljs-string">removed user foo.</span>&quot;;
⁠  };
⁠};</code></pre>

<h4 id="newfeatureflaguse_server_authtoenableauthpropertiesininifiles">new feature flag use_server_auth to enable auth properties in INI files</h4>

<h4 id="defineservergroupswithspecialserverpropertiesininifiles">define server groups with special server properties in INI files</h4>

<p>The INI file feature is improved to allow custom properties for servers and to allow inheritance of sections.</p>

<p>You have to use use_server_auth feature flag for this.</p>

<pre><code class="hljs">⁠<span class="hljs-comment"># Rexfile</span><span class="hljs-comment">
⁠</span><span class="hljs-keyword">use</span> Rex -feature =&gt; [qw/use_server_auth/];
⁠<span class="hljs-keyword">use</span> <span class="hljs-function">Rex::Group</span>::<span class="hljs-function">Lookup</span>::<span class="hljs-function">INI</span>;
⁠groups_file(&#39;<span class="hljs-string">servergroups.ini</span>&#39;);</code></pre>

<pre><code>; my group file
[frontends]
fe01
fe02

fe03
fe04
fe05

# the backends
[backends]
be01
be02
;be03
be04

[db]
db[01..02]

[redis]
@backends
redis01
redis02

[memcache &lt; redis]
memcache01
memcache02 user=root password=foob4r sudo=true services=apache,memcache
</code></pre>

<p>This will create the following groups:</p>

<pre><code>frontends: fe01, fe02, fe03, fe04, fe05
backends: be01, be02, be04
db: db01, db02
redis: be01, be02, be04, redis01, redis02
memcache: be01, be02, be04, redis01, redis02, memcache01, memcache02
</code></pre>

<p>memcache02 will use custom authentication and there will be a special option &quot;services&quot; for this server that can be queried like this:</p>

<pre><code class="hljs">⁠task &quot;<span class="hljs-string">mytask</span>&quot;,
⁠  group =&gt; &quot;<span class="hljs-string">memcache</span>&quot;,
⁠  <span class="hljs-keyword">sub </span>{
⁠  say connection-&gt;server-&gt;option(&quot;<span class="hljs-string">services</span>&quot;);
⁠  };</code></pre>

<h4 id="cwdoptionforruncommand">cwd option for run command</h4>

<pre><code class="hljs">⁠run &quot;<span class="hljs-string">ls -l</span>&quot;, cwd =&gt; &quot;<span class="hljs-string">/home</span>&quot;;</code></pre>

<h3 id="speedimprovements">Speed improvements</h3>

<ul>
<li>#123 - File manipulation speed for sed - liedekef</li>
<li>#133 - speed of delete_lines_matching function - liedekef</li>
<li>#135 #136 #137 - speed improvement for os detection - liedekef</li>
<li>#143 - speed of append_if_no_such_line - liedekef</li>
</ul>

<h1 id="bugfixescleanupsenhancements">Bugfixes/cleanups/enhancements</h1>

<ul>
<li>#115 - fixed the most possible things (sudo_without_sh flag)</li>
<li>removed Blastwave package capabilities from Solaris, because Blastwave doesn&#39;t exist anymore</li>
<li>#129 - removed an unnecessary opendir call - liedekef</li>
<li>#148 - use equery for Rex::Pkg::Gentoo in get_installed, later replaced by #165 - tianon</li>
<li>#149 - updated most of Rsync with server-specific auth - tianon</li>
<li>#159 - Don&#39;t execute a task if the defined group doesn&#39;t contain servers. There is a feature flag to disable this behavior (empty_groups)</li>
<li>#163 - Rex::Pkg::Gentoo: Fix separator character between package name and version - ferki</li>
<li>#165 - Rex::Pkg::Gentoo: Replace get_installed checking method - ferki</li>
</ul>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <a href="https://groups.google.com/group/rex-users/">Google Group</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="http://www.freelists.org/list/rex-users">Mailinglist</a> / <a href="irc://irc.freenode.net/rex">irc.freenode.net #rex</a>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

   </body>

</html>
