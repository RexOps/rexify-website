<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html content="text/html; charset=utf-8" content-type" prefix="og: http://ogp.me/ns#" xml:lang="en&gt;
   &lt;head&gt;
      &lt;meta http-equiv=" xmlns="http://www.w3.org/1999/xhtml">

      <title>Release notes for 0.33</title>

      <meta content="Release notes for 0.33" property="og:title">
      <meta content="website" property="og:type">
      <meta content="https://www.rexify.org/docs/release_notes/0.33.html" property="og:url">
      <meta content="https://www.rexify.org/public/images/skin/rexify.org/favicon.png" property="og:image">

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css?20130325" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css?20140412" media="screen" rel="stylesheet" type="text/css">
      <meta content="" name="description">
      <meta content="" name="keywords">

   
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>Deployment &amp; Configuration Management</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2019-07-02</b><br>
                     <a href="/blog/2019/07/02/deprecating_official_rex_packages.html">Deprecating official Rex packages</a></p><p>
                   </p><p></p><p>As part of our efforts to simplify maintenance around RexOps projects, we have decided to stop building Rex packages on our side. We recommend relying on OS packages maintained by the various distributions in their respective upstream repositories, or to install Rex from CPAN.</p>

                   <p><b>2019-06-09</b><br>
                     <a href="/blog/2019/06/09/site-update.html">Post-migration updates &amp; clean-up</a></p><p>
                   </p><p></p><p>Over the course of the past weeks many clean-ups have been
done, reaping the benefits provided by our new
<a href="http://preaction.me/statocles">Statocles</a>-based site:</p>

                   <p><b>2019-05-19</b><br>
                     <a href="/blog/2019/05/19/new-site.html">New site engine for rexify.org</a></p><p>
                   </p><p></p><p>After months of work on a new site backend, we reached the MVP today for
our site to be switched over to a new engine: from now on, our site will be
maintained using the static site generator
<a href="http://preaction.me/statocles/">Statocles</a>.</p>


               <h2>Conferences</h2>
                 <div class="news_widget">
                    <div class="news_date">2016-06-21</div>
                    <div class="news_content"><a href="http://preaction.me/">Doug Bell (preaction)</a> from <a href="http://chicago.pm.org/">Chicago.pm</a> will give an <a href="http://www.yapcna.org/yn2016/talk/6549">Introduction to Rex</a> talk at <a href="http://www.yapcna.org/yn2016/">YAPC::NA 2016</a>.</div>
                 </div>

               <h2>Need Help?</h2>
               <p>Rex is a pure open source project, you can find community support in the following places:</p>
               <ul>
                  <li>IRC: <a href="irc://irc.freenode.net/rex">#rex on irc.freenode.net</a></li>
                  <li>Groups: <a href="https://groups.google.com/group/rex-users/">Rex Users</a></li>
                  <li>Serverfault: <a href="http://serverfault.com/questions/tagged/rex">Tag with <i>rex</i></a></li>
                  <li>Issues: <a href="https://github.com/RexOps/Rex/issues">on GitHub</a></li>
                  <li>Feature: you miss a <a href="/feature.html">feature</a>?</li>
               </ul>
               <p><a href="/support/index.html">Professional support</a> is also available.</p>
            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
              




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/release_notes/index.html">Release notes</a>
» <a href="/docs/release_notes/0.33.html">Release notes for 0.33</a>
</p>

              
              <h1>Release notes for 0.33</h1>
              <h1 id="general">General</h1>

<ul>
<li><p>Speed improvement</p>

<p>The <em>-c</em> (cache) CLI option speeds up execution very much.</p></li>
<li><p>Profiler class</p>

<p>This is mostly for developers. There is now a profiler class to profile execution of <em>things</em>.</p>

<p>If you want to generate a profiling output you can do this with:</p>

<pre><code>rex -dd $yourtask
</code></pre></li>
<li><p>Mounting (thanks to Laird Liu)</p>

<p>It is now possible to write mount entries to /etc/fstab with the <em>persistent</em> option.</p>

<pre><code class="hljs">⁠mount &quot;<span class="hljs-string">/dev/sda5</span>&quot;, &quot;<span class="hljs-string">/mnt/sda5</span>&quot;, persistent =&gt; TRUE;    </code></pre></li>
<li><p>Partitioning</p>

<p>It is now possible to mount the new created partition.</p>

<pre><code class="hljs">⁠partition &quot;<span class="hljs-string">/</span>&quot;,
⁠  fstype =&gt; &quot;<span class="hljs-string">ext3</span>&quot;,
⁠  size   =&gt; <span class="hljs-number">15000</span>,
⁠  ondisk =&gt; &quot;<span class="hljs-string">sda</span>&quot;,
⁠  type   =&gt; &quot;<span class="hljs-string">primary</span>&quot;,
⁠  mount  =&gt; TRUE;    </code></pre>

<p>And if you want to write fstab entries directly.</p>

<pre><code class="hljs">⁠partition &quot;<span class="hljs-string">/</span>&quot;,
⁠  fstype           =&gt; &quot;<span class="hljs-string">ext3</span>&quot;,
⁠  size             =&gt; <span class="hljs-number">15000</span>,
⁠  ondisk           =&gt; &quot;<span class="hljs-string">sda</span>&quot;,
⁠  type             =&gt; &quot;<span class="hljs-string">primary</span>&quot;,
⁠  mount_persistent =&gt; TRUE;    </code></pre></li>
<li><p>New keyword <em>make</em>.</p>

<p>This is just a cosmetic one. It is now possible to write tasks this way:</p>

<pre><code class="hljs">⁠<span class="hljs-comment"># old</span><span class="hljs-comment">
⁠</span>task prepare =&gt; <span class="hljs-keyword">sub </span>{
⁠
⁠  <span class="hljs-comment"># do something</span><span class="hljs-comment">
⁠</span>};
⁠
⁠<span class="hljs-comment"># new</span><span class="hljs-comment">
⁠</span>task prepare =&gt; make {
⁠
⁠  <span class="hljs-comment"># do something</span><span class="hljs-comment">
⁠</span>};
⁠
⁠<span class="hljs-comment"># old</span><span class="hljs-comment">
⁠</span>task &quot;<span class="hljs-string">prepare</span>&quot;,
⁠  group =&gt; &quot;<span class="hljs-string">foo</span>&quot;,
⁠  <span class="hljs-keyword">sub </span>{
⁠  <span class="hljs-comment"># do something</span><span class="hljs-comment">
⁠</span>  };
⁠
⁠<span class="hljs-comment"># new</span><span class="hljs-comment">
⁠</span>task &quot;<span class="hljs-string">prepare</span>&quot;,
⁠  group =&gt; &quot;<span class="hljs-string">foo</span>&quot;,
⁠  make {
⁠  <span class="hljs-comment"># do something</span><span class="hljs-comment">
⁠</span>  };    </code></pre></li>
<li><p>Usability improvements, thanks to Anders Ossowicki</p></li>
</ul>

<h1 id="usermanagement">User Management</h1>

<ul>
<li><p>New option <em>no_create_home</em></p>

<p>There is a new option <em>no_create_home</em>. If this option is set the home directory of the user will not be created.</p>

<p>If the <em>ssh_key</em> option is set it will only create the .ssh directory if the home directory exists.</p>

<pre><code class="hljs">⁠create_user &quot;<span class="hljs-string">foo</span>&quot;,
⁠  home           =&gt; &quot;<span class="hljs-string">/data/homes/foo</span>&quot;,
⁠  no_create_home =&gt; TRUE;    </code></pre></li>
<li><p>Fixed <em>expire</em> bug for create_user</p></li>
</ul>

<h1 id="templates">Templates</h1>

<ul>
<li><p>Template class now exchangeable (thanks to Laird Liu)</p>

<p>If you want to use another Template class (for example Template::Toolkit) you can use it now.</p>

<pre><code class="hljs">⁠<span class="hljs-comment"># Rexfile</span><span class="hljs-comment">
⁠</span><span class="hljs-keyword">use</span> <span class="hljs-keyword">strict</span>;
⁠<span class="hljs-keyword">use</span> <span class="hljs-keyword">warnings</span>;
⁠
⁠<span class="hljs-keyword">use</span> Template;
⁠
⁠set template_function =&gt; <span class="hljs-keyword">sub </span>{
⁠  <span class="hljs-keyword">my</span> ( <span class="hljs-type">$content</span>, <span class="hljs-type">$vars</span> ) = <span class="hljs-type">@_</span>;
⁠  <span class="hljs-keyword">my</span> <span class="hljs-type">$t</span> = Template-&gt;new;
⁠  <span class="hljs-keyword">my</span> <span class="hljs-type">$out</span>;
⁠  <span class="hljs-type">$t</span>-&gt;<span class="hljs-type">process</span>( \<span class="hljs-type">$content</span>, <span class="hljs-type">$vars</span>, \<span class="hljs-type">$out</span> );
⁠  <span class="hljs-keyword">return</span> <span class="hljs-type">$out</span>;
⁠};
⁠
⁠task foo =&gt; <span class="hljs-keyword">sub </span>{
⁠  file &quot;<span class="hljs-string">/etc/foo/service.conf</span>&quot;,
⁠    content =&gt; template(
⁠    &quot;<span class="hljs-string">service.conf.tpl</span>&quot;,
⁠    name =&gt; &quot;<span class="hljs-string">foo</span>&quot;,
⁠    port =&gt; <span class="hljs-number">1903</span>
⁠    );
⁠};    </code></pre></li>
</ul>

<h1 id="modules">Modules</h1>

<p>It is now easier to write independent modules. There is no break in compatibility. Both ways will work. But we suggest to rewrite/move your files.</p>

<p>Old-way module structure:</p>

<ul>
<li><p>lib/Apache.pm</p></li>
<li><p>lib/templates/apache-template</p></li>
<li><p>lib/Apache/SubModule.pm</p></li>
</ul>

<p>New module structure:</p>

<ul>
<li><p>lib/Apache/Module.pm (this is the old lib/Apache.pm)</p></li>
<li><p>lib/Apache/templates/apache-template</p></li>
<li><p>lib/Apache/SubModule.pm</p></li>
</ul>

<h2 id="convertinganoldmodule">Converting an old module</h2>

<p>It is easy to convert an old module. For the example from above, you just have to move the file &quot;lib/Apache.pm&quot; to &quot;lib/Apache/Module.pm&quot; (no code changes needed). And move the templates to &quot;lib/Apache/templates&quot;.</p>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <a href="https://groups.google.com/group/rex-users/">Google Group</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="http://www.freelists.org/list/rex-users">Mailinglist</a> / <a href="irc://irc.freenode.net/rex">irc.freenode.net #rex</a>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

   </body>

</html>
