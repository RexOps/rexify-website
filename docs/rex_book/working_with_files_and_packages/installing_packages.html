<p>Installing packages is easy. You can use the pkg function for this.</p>
<pre><code class="perl">use Rex -feature =&gt; ['1.0'];<br /><br /></code><code class="perl">user "root";<br /></code><code class="perl">password "f00b4r";<br /><br /></code><code class="perl">task "prepare_system", group =&gt; "frontends", sub {<br /></code><code class="perl">&nbsp;&nbsp; pkg "apache2",<br /></code><code class="perl">&nbsp;&nbsp;&nbsp;&nbsp; ensure =&gt; "present";<br /></code><code class="perl">};</code></pre>
<p>If you have to install multiple packages you can use an array so that you don't have to write that much.</p>
<pre><code class="perl">use Rex -feature =&gt; ['1.0'];<br /><br /></code><code class="perl">user "root";<br /></code><code class="perl">password "f00b4r";<br /><br /></code><code class="perl">task "prepare_system", group =&gt; "frontends", sub {<br /></code><code class="perl">&nbsp;&nbsp; pkg ["apache2", "libphp5-apache2", "mysql-server"],<br /></code><code class="perl">&nbsp;&nbsp;&nbsp;&nbsp; ensure =&gt; "present";<br /></code><code class="perl">};</code></pre>
<p>If you need to write a distribution independent module you can also use the case statement.</p>
<pre><code class="perl">user Rex -base;<br /><br /></code><code class="perl">user "root";<br /></code><code class="perl">password "f00b4r";<br /></code><code class="perl"><br />task "prepare_system", group =&gt; "frontends", sub {<br /></code><code class="perl">&nbsp;&nbsp; my $packages = case operating_system,<br /></code><code class="perl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Debian =&gt; ["apache2", "libphp5-apache2"],<br /></code><code class="perl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CentOS =&gt; ["httpd", "php5"],<br /><br /></code><code class="perl">&nbsp;&nbsp; pkg $packages,<br /></code><code class="perl">&nbsp;&nbsp;&nbsp;&nbsp; ensure =&gt; "present";<br /></code><code class="perl">};</code></pre>
<p>&nbsp;</p>