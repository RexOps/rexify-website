<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html prefix="og: http://ogp.me/ns#" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta content="text/html; charset=utf-8" http-equiv="content-type">

      <title>Authentication</title>

      <meta content="Authentication" property="og:title">
      <meta content="website" property="og:type">
      <meta content="https://rexify.org/docs/rex_book/the_rex_dsl/authentication.html" property="og:url">
      <meta content="https://rexify.org/public/images/skin/rexify.org/open_graph.png" property="og:image">

      <meta content="width=1024, initial-scale=0.5" name="viewport">
      <link href="/public/images/skin/rexify.org/favicon.png" rel="shortcut icon">
      <link href="/public/css/skin/rexify.org/hs/tomorrow.css" rel="stylesheet">
      <link charset="utf-8" href="/public/css/skin/rexify.org/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
      <link charset="utf-8" href="/public/css/skin/rexify.org/default.css" media="screen" rel="stylesheet" type="text/css">
      <meta content="" name="description">
      <meta content="" name="keywords">

   </head>
   <body>

      <div id="page">

         <div class="top_div" id="top-div">
            <h1>(R)?ex <small>the friendly automation framework</small></h1>
            <div id="nav-div">
               
<div class="nav_links">
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/get/index.html">Get Rex</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/care/index.html">Care</a>
      <ul class="dropdown_menu dropdown_care">
          <li><a href="/care/help__r__ex.html">Help (R)?ex</a></li>
          <li><a href="/care/help_people_in_need.html">Help people</a></li>
      </ul>
    </li>
    <li><a href="/support/index.html">Support</a></li>
    <li>
      <b class="arrow_box"></b>
      <a class="dropdown_link" href="/docs/index.html">Docs</a>
      <ul class="dropdown_menu dropdown_docs">
          <li><a href="/docs/faq/index.html">FAQ</a></li>
          <li><a href="/docs/guides/index.html">Guides</a></li>
          <li><a href="/docs/rex_book/index.html">Rex Book (work in progress)</a></li>
          <li><a href="/docs/release_notes/index.html">Release notes</a></li>
            <li class="divider"></li>
          <li><a href="https://metacpan.org/release/Rex">API</a></li>
      </ul>
    </li>
  </ul>
</div>

            </div>
            </div>
         </div>

         <div id="widgets_container">
            <div id="widgets">
               <h2>News</h2>
                   <p><b>2023-03-05</b><br>
                     <a href="/blog/2023/03/05/rex-1.14.1.html">Rex-1.14.1</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.14.1.html">Rex-1.14.1 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.14.1">available on CPAN</a>. It contains bug fixes and documentation updates.</p>

                   <p><b>2023-02-05</b><br>
                     <a href="/blog/2023/02/05/rex-1.14.0.html">Rex-1.14.0</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.14.0.html">Rex-1.14.0 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.14.0">available on CPAN</a>. It contains improved Rexfile loading, documentation updates, and bumps the minimum required Perl version to 5.12.5.</p>

                   <p><b>2021-07-05</b><br>
                     <a href="/blog/2021/07/05/rex-1.13.4.html">Rex-1.13.4</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.13.4.html">Rex-1.13.4 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.13.4">available on CPAN</a>. It contains documentation updates, and a fix for inconsistent behavior between the <code>content</code> and <code>source</code> options of the file command.</p>

                   <p><b>2021-03-05</b><br>
                     <a href="/blog/2021/03/05/rex-1.13.3.html">Rex-1.13.3</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.13.3.html">Rex-1.13.3 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.13.3">available on CPAN</a>. It contains documentation updates, and a fix for debconf parsing. Behind the scenes, CI was migrated over to GitHub Actions as well.</p>

                   <p><b>2020-12-05</b><br>
                     <a href="/blog/2020/12/05/rex-1.13.2.html">Rex-1.13.2</a></p><p>
                   </p><p></p><p>The <a href="/docs/release_notes/1.13.2.html">Rex-1.13.2 release</a> is now <a href="https://metacpan.org/release/FERKI/Rex-1.13.2">available on CPAN</a>. It contains only documentation updates, mostly for the built-in template capabilities, but also fixes a few typos.</p>


               <h2>Events</h2>
                   <p><b>2021-03-08</b><br>
                     <a href="/blog/2021/03/04/learn_automation_using_rex.html">Learning automation using Rex</a></p><p>
                   </p><p></p><p>Ferenc Erki (FErki) will be the guest of <a href="https://www.linkedin.com/in/szabgab/">Gábor Szabó</a> on the next Code Maven live stream to learn about automation using Rex. Register for the free event via <a href="https://code-maven.com/automation-with-rex">Code Maven</a> or <a href="https://www.meetup.com/Code-Mavens/events/276730377/">Meetup</a>, and join the discussion!</p>

                   <p><b>2020-03-05</b><br>
                     <a href="/blog/2020/03/05/unexpected_use_cases_with_rex.html">Unexpected use cases with Rex</a></p><p>
                   </p><p></p><p><a href="https://act.yapc.eu/gpw2020/talk/7699">Unexpected use cases with Rex</a> at the <a href="https://act.yapc.eu/gpw2020/index.html">22nd German Perl/Raku Workshop 2020</a> in Erlangen by Ferenc Erki (FErki).</p>

                   <p><b>2019-11-09</b><br>
                     <a href="/blog/2019/11/09/rex_and_friends_2019.html">Rex &amp; Friends</a></p><p>
                   </p><p></p><p><a href="https://friends.barcelona.pm/2019/#/talks/rex-and-friends">Rex &amp; Friends</a> talk at the <a href="https://friends.barcelona.pm">Barcelona Perl &amp; Friends 2019</a> by Ferenc Erki (FErki).</p>


            </div>
         </div> <!-- widgets -->

         <div id="content_container">
            <div id="content">
                




<p>
» <a href="/index.html">Home</a>
» <a href="/docs/index.html">Docs</a>
» <a href="/docs/rex_book/index.html">Rex book</a>
» <a href="/docs/rex_book/the_rex_dsl/index.html">The rex dsl</a>
» <a href="/docs/rex_book/the_rex_dsl/authentication.html">Authentication</a>
</p>

              
              <h1>Authentication</h1>
              <p>Rex is capable to use two different SSH implementations under the hood: Net::SSH2 which is default on Windows, and the combination of Net::OpenSSH and Net::SFTP::Foreign on other platforms.</p>

<p>Those SSH implementations support many different authentication methods like passwords, key based or Kerberos authentication, or using and forwarding SSH agent. If you don&#39;t specify one of them explicitly, Rex will try to figure out which one to use, but that may or may not work for you, or be the one you expected. Rex also tries to use the current user&#39;s username for authentication if it&#39;s not specified with user.</p>

<p>All in all, despite the comfort the above behaviour might provide, we recommend to be explicit about the authentication method to be used as some servers may be configured to drop the connection after a couple of failed authentication attempts.</p>

<p>You can find examples on how to configure them below.</p>

<h2 id="passwordauthentication">Password authentication</h2>

<p>The simplest way to authenticate against your servers is to use password authentication. For this you need a valid user and a password on the remote host.</p>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
password &#39;<span class="hljs-string">my_password</span>&#39;;
pass_auth;</code></pre>

<p>Specifying <code>pass_auth</code> is optional.</p>

<h2 id="keybasedauthentication">Key based authentication</h2>

<p>Another simple way is to use a pair of private and public keys to authenticate against your servers.</p>

<p>If you don&#39;t have a pair of keys yet you can create them with ssh-keygen on Unix-like systems and with PuTTYgen on Windows.</p>

<p>Due to the differences of their implementations, the key here (pun intended) is that you have to include the path to both of your keys when using Net::SSH2, but you can omit them when using Net::OpenSSH.</p>

<h3 id="net::ssh2">Net::SSH2</h3>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
private_key &#39;<span class="hljs-string">/path/to/your/private.key</span>&#39;;
public_key &#39;<span class="hljs-string">/path/to/your/public.key</span>&#39;;
key_auth;</code></pre>

<h3 id="net::openssh">Net::OpenSSH</h3>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
key_auth;</code></pre>

<p>If you use a passphrase with your private key, you can specify it simply as if it was a password:</p>

<h3 id="net::ssh2">Net::SSH2</h3>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
private_key &#39;<span class="hljs-string">/path/to/your/private.key</span>&#39;;
public_key &#39;<span class="hljs-string">/path/to/your/public.key</span>&#39;;
password &#39;<span class="hljs-string">my_password</span>&#39;;
key_auth;</code></pre>

<h3 id="net::openssh">Net::OpenSSH</h3>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
password &#39;<span class="hljs-string">my_password</span>&#39;;
key_auth;</code></pre>

<h2 id="usingansshagent">Using an SSH agent</h2>

<p>If you can&#39;t or don&#39;t want to use any of the above methods, you can use agent authentication. Configuration for it is very similar to key based authentication, you only need to omit <code>key_auth</code>.</p>

<h3 id="net::ssh2">Net::SSH2</h3>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
private_key &#39;<span class="hljs-string">/path/to/your/private.key</span>&#39;;
public_key &#39;<span class="hljs-string">/path/to/your/public.key</span>&#39;;</code></pre>

<h3 id="net::openssh">Net::OpenSSH</h3>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;</code></pre>

<p>Important notes:</p>

<ol>
<li>For agent authentication to work, make sure the agent is running on your system.</li>
<li>Agent forwarding only works with Net::OpenSSH.</li>
</ol>

<h2 id="kerberosauthentication">Kerberos authentication</h2>

<p>As of version 0.42.0, Rex supports Kerberos authentication through Net::OpenSSH:</p>

<pre><code class="hljs">user &#39;<span class="hljs-string">root</span>&#39;;
krb5_auth;</code></pre>



            </div>
         </div> <!-- content -->

       <!-- page -->


   <div class="clearfix"></div>
   <div class="bottom_bar">
      <p>Proudly powered by <a href="http://preaction.me/statocles/">Statocles</a></p>
      <a href="https://github.com/RexOps/Rex">GitHub</a> / <a href="https://matrix.to/#/#rexops:matrix.org">Matrix</a> / <a href="https://webchat.oftc.net/?channels=rexops">IRC</a> / <a href="http://twitter.com/RexOps">Twitter</a> / <a href="https://groups.google.com/group/rex-users/">Google Groups</a> / <a href="https://stackshare.io/rex">StackShare</a> / <a href="http://www.freelists.org/list/rex-users">Mailing list</a> / <a href="http://serverfault.com/questions/tagged/rex">Server Fault</a>   -.ô.-   <a href="http://www.disclaimer.de/disclaimer.htm" target="_blank">Disclaimer</a>
   </div>

   </body>

</html>
