<p>Everyone knows the pain if something gets deprecated and one have to port his old (and stable) code to a new version of a library or a framework. There is enough work to do instead of fixing code to work with newer versions of them.</p>
<p>So there is one premise new versions of Rex has to fulfill. They must be backward compatible.</p>
<p>I know this might be impossible in the one or other way, but to minimize this danger there is a thing called feature flags. If there is the need to break backward compatibility in favor of a new feature there will be a feature flag for this change. And only if this feature flag gets enabled in the Rexfile it will break compatibility.</p>
<p>So the default is always to be compatible.</p>
<p>If you have a problem that occurs after an update, it is considered as a bug. Please report this bug in our issue tracker.</p>
<h2>Feature flags</h2>
<p>This is the current list of feature flags:</p>
<table border="0">
<tbody>
<tr style="background-color: #efefef; margin: 5px;">
<td style="padding: 5px;"><strong>Flag</strong></td>
<td style="padding: 5px;"><strong>Since</strong></td>
<td style="padding: 5px;"><strong>Description</strong></td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">1.3</td>
<td style="padding-top: 2px; padding-bottom: 2px;">1.3</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Activating the new template engine by default.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">no_template_ng</td>
<td style="padding-top: 2px; padding-bottom: 2px;">1.3</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Disabling the new template engine.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">1.0</td>
<td style="padding-top: 2px; padding-bottom: 2px;">1.0</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Disabling usage of a tty. This increases compatibility for remote execution. Furthermore, all features from earlier versions are activated.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">no_autodie</td>
<td style="padding-top: 2px; padding-bottom: 2px;">1.0</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will disable autodie feature.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">template_ng</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.56</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Enabling the new template engine (better error reporting, etc.)</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.56</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.56</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will activate autodie feature. Furthermore, all features from earlier versions are activated.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">autodie</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.56</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will enable autodie feature: die on all failed <a href="../../api/Rex/Commands/Fs.pm.html">filesytem commands</a></td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.55</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.55</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will activate using Net::OpenSSH by default if present. Furthermore, all features from earlier versions are activated.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.54</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.54</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will activate checking services for existence before trying to manipulate them, and set() will overwrite already existing values (instead of concatenating). Furthermore, all features from earlier versions are activated.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.53</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.53</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will activate register_cmdb_top_scope. And all things 0.51 and down activated.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">register_cmdb_top_scope</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.53</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will register all cmdb top scope variables automatically in the templates.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.51</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.51</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will load Rex::Constants and the CMDB by default. And all things 0.47 and down activated.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">no_autodie</td>
<td style="padding-top: 2px; padding-bottom: 2px;">1.0</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Will disable autodie feature.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">no_path_cleanup</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.44</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Rex cleans the path before executing a command. With this feature Rex doesn't cleanup the path.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">verbose_run</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.47</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Explicitly output "Successfully executed" or "Error executing" messages for run() commands.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">source_profile</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.44</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Source $HOME/.profile before running a command.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">source_global_profile</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.44</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Source /etc/profile before running a command.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">exec_autodie</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.44</td>
<td style="padding-top: 2px; padding-bottom: 2px;">If you execute a command with run() Rex will die() if the command returns a RETVAL != 0.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">exec_and_sleep</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.43</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Sometimes some commands that fork away didn't keep running. With this flag rex will wait a few ms before exiting the shell.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">disable_strict_host_key_checking&nbsp;&nbsp;</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.43</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Disabling strict host key checking for openssh connection mode.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">reporting</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.43</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Enable reporting</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">empty_groups</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.42</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Enable usage of empty groups.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">use_server_auth</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.42</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Enable the usage of special authentication options for servers.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">tty</td>
<td style="padding-top: 2px; padding-bottom: 2px;">1.0</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Enable pty usage for ssh connections. (Default)</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">no_tty</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.41</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Disable pty usage for ssh connections.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">no_local_template_vars</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.40</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Use global variables in templates</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">sudo_without_sh</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.40</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Run sudo commands directly without the use of 'sh'. This might break things.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">sudo_without_locales</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.40</td>
<td style="padding-top: 2px; padding-bottom: 2px;">Run sudo commands without locales. this will break things if you don't use english locales.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">exit_status</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.39</td>
<td style="padding-top: 2px; padding-bottom: 2px;">This option tells Rex to return a non zero value on exit if a task fails.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.35</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.35</td>
<td style="padding-top: 2px; padding-bottom: 2px;">This option enables the features of 0.31 and the possibility to call tasks as a functions without the need to use a hash reference for the parameters.</td>
</tr>
<tr style="border-bottom: 1px dotted #e5e5e5; padding-bottom: 2px; padding-top: 2px;">
<td style="padding-top: 2px; padding-bottom: 2px;">0.31</td>
<td style="padding-top: 2px; padding-bottom: 2px;">0.31</td>
<td style="padding-top: 2px; padding-bottom: 2px;">To enable special authentication options for a server group. This will overwrite the default authentication options for a task.</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h2>Howto enable Feature Flags</h2>
<p>You can enable feature flags in your Rexfile with the following code:</p>
<pre><code class="perl"># Rexfile<br /></code><code class="perl">use Rex -feature =&gt; ['0.31'];</code></pre>
<p>or even multiple ones like this:</p>
<pre><code class="perl"># Rexfile<br /></code><code class="perl">use Rex -feature =&gt; [qw(exec_autodie source_profile)];</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>